"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[486],{8486:function(t,e,n){n.r(e),n.d(e,{ProductsModule:function(){return y}});var i=n(8583),s=n(4655),o=n(3018),r=n(4736),c=n(3462),a=n(9790),g=n(1352),d=n(2238),p=n(2019),h=n(2018),u=n(3679),l=n(3886),Z=n(2557);function _(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",9),o.TgZ(1,"div",10),o.TgZ(2,"div",11),o.TgZ(3,"div",12),o.TgZ(4,"label"),o._uU(5),o.ALo(6,"translate"),o.ALo(7,"translate"),o.qZA(),o.TgZ(8,"div",13),o.TgZ(9,"input",14),o.NdJ("keyup",function(e){return o.CHM(t),o.oxw().filterproducts(e,"searchTerm")})("ngModelChange",function(e){return o.CHM(t),o.oxw().nameSearchTerm=e}),o.ALo(10,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(5),o.AsE("",o.lcZ(6,4,"tr_name"),"/",o.lcZ(7,6,"tr_code"),""),o.xp6(4),o.s9C("placeholder",o.lcZ(10,8,"tr_search")),o.Q6J("ngModel",t.nameSearchTerm)}}function m(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o._uU(12),o.qZA(),o.TgZ(13,"td"),o.TgZ(14,"span",23),o._UZ(15,"i",24),o.TgZ(16,"div",25),o._UZ(17,"div",26),o.TgZ(18,"div",27),o.NdJ("click",function(){const e=o.CHM(t).$implicit;return o.oxw(3).deleteProduct(e._id)}),o.TgZ(19,"div",28),o._uU(20),o.ALo(21,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=e.$implicit,n=e.index;o.xp6(2),o.hij(" ",n+1,""),o.xp6(2),o.Oqu(t.name),o.xp6(2),o.Oqu(null==t.branch?null:t.branch.name),o.xp6(2),o.Oqu(t.code),o.xp6(2),o.Oqu(t.stock),o.xp6(2),o.Oqu(t.price),o.xp6(8),o.hij(" ",o.lcZ(21,7,"tr_action.Restore")," ")}}function f(t,e){if(1&t&&(o.TgZ(0,"div",20),o.TgZ(1,"table",21),o.TgZ(2,"thead"),o.TgZ(3,"tr"),o._UZ(4,"th"),o.TgZ(5,"th"),o._uU(6,"Product Name"),o.qZA(),o.TgZ(7,"th"),o._uU(8,"Branch"),o.qZA(),o.TgZ(9,"th"),o._uU(10,"Code"),o.qZA(),o.TgZ(11,"th"),o._uU(12,"Stock"),o.qZA(),o.TgZ(13,"th"),o._uU(14,"price"),o.qZA(),o._UZ(15,"th"),o.qZA(),o.qZA(),o.TgZ(16,"tbody"),o.YNc(17,m,22,9,"tr",22),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw(2);o.xp6(17),o.Q6J("ngForOf",t.productsList)}}function A(t,e){1&t&&(o.TgZ(0,"div",29),o._UZ(1,"i",30),o.TgZ(2,"p"),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA()),2&t&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"tr_empty_state")))}function P(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",15),o.YNc(1,f,18,1,"div",16),o.YNc(2,A,5,3,"div",17),o.TgZ(3,"div",18),o.TgZ(4,"pagination",19),o.NdJ("paginationUpdate",function(e){return o.CHM(t),o.oxw().paginationUpdate(e)}),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.productsList.length>0),o.xp6(1),o.Q6J("ngIf",0==t.productsList.length),o.xp6(2),o.Q6J("paginationData",t.paginationData)("perPage",t.paginationPerPage)}}function b(t,e){1&t&&(o.TgZ(0,"div"),o._UZ(1,"app-ghost-line",31),o.qZA()),2&t&&(o.xp6(1),o.Q6J("length",12)("type","table"))}const O=[{path:"",component:(()=>{class t{constructor(t,e,n,i,s,o){this.productsService=t,this.appNotificationService=e,this.translateService=n,this.globals=i,this.dialog=s,this.CategoriesServce=o,this.productsLoading=!0,this.isFilterOpen=!0,this.paginationPerPage=10,this.categorys=[],this.productsList=[],this.categorysLoading=!1,this.fullscreenEnabled=!1,this.isNotAuthorized=!1,this.iscategoryNotAuthorized=!1,this.currentOrder={name:"",category:""},this.params={page:1,perPage:this.paginationPerPage},this.categorysParams={page:1,per_page:10},this.subscriptions=[]}ngOnInit(){this.getproducts(),this.getcategorys()}getproducts(){this.productsLoading=!0,this.subscriptions.push(this.productsService.getProducts(this.params).subscribe(t=>{this.productsList=t.products,this.paginationData=t.meta,this.productsLoading=!1},t=>{403==t.status?(this.isNotAuthorized=!0,this.productsLoading=!1):this.appNotificationService.push(this.translateService.instant("tr_unexpected_error_message"),"error")}))}getcategorys(){this.categorysLoading=!0,this.subscriptions.push(this.CategoriesServce.getCategorys(this.categorysParams).subscribe(t=>{this.categorysPagination=t.meta,this.categorys=this.categorys.concat(t.categories),this.categorysLoading=!1},t=>{403==t.status&&(this.iscategoryNotAuthorized=!0,this.categorysLoading=!1)}))}nextBatch(){this.categorysPagination.nextPage&&(this.categorysLoading=!0,this.categorysParams.page=this.categorysPagination.nextPage,this.getcategorys())}filterproducts(t,e){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{t="by_category_id"==e?t:t.target.value.trim(),this.params.search=t,this.params.page=1,this.getproducts()},500)}paginationUpdate(t){this.params.page=t,this.getproducts()}deleteProduct(t){this.productsService.deleteProduct(t).subscribe(()=>{this.params.page=1,this.getproducts()})}ngOnDestroy(){this.subscriptions.forEach(t=>t&&t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(r.T),o.Y36(c.o),o.Y36(a.sK),o.Y36(g.O),o.Y36(d.uw),o.Y36(p.Y))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-products-list"]],decls:12,vars:7,consts:[["not-authorized","",1,"content-shadow","bg-white","mb-5",3,"notAuthorized"],[1,"size-body","title-with-btn","plr-4","ptb-4"],[1,"page-title"],[1,"btn-group"],[1,"s-btn","btn-secondary","size-body",3,"click"],["aria-hidden","false",1,"fa","fa-filter","text-primary"],["class","filters-card bg-secondary plr-4 ptb-2 mb-7",4,"ngIf"],["class","plr-4 mt-4",4,"ngIf"],[4,"ngIf"],[1,"filters-card","bg-secondary","plr-4","ptb-2","mb-7"],[1,"row"],[1,"col-md-3"],[1,"form-group","mb-0"],[1,"input-with-icon","bg-white","width-100"],[1,"s-control",3,"placeholder","ngModel","keyup","ngModelChange"],[1,"plr-4","mt-4"],["class","table-container products-list","id","table-container",4,"ngIf"],["class","empty-state-here text-center ptb-8",4,"ngIf"],[1,"plr-4","ptb-4"],[3,"paginationData","perPage","paginationUpdate"],["id","table-container",1,"table-container","products-list"],[1,"s-table","table","layout-fixed","products-list"],[4,"ngFor","ngForOf"],[1,"options-menu"],["aria-hidden","true",1,"fa","fa-ellipsis-v"],[1,"options-menu-container","p-0"],[1,"border-bottom"],[1,"single-option",3,"click"],[1,"text-error"],[1,"empty-state-here","text-center","ptb-8"],[1,"fa","fa-folder-open","empty-icon","text-primary"],[3,"length","type"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"h2",1),o.TgZ(2,"span",2),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.TgZ(5,"div",3),o.TgZ(6,"button",4),o.NdJ("click",function(){return e.isFilterOpen=!e.isFilterOpen}),o._UZ(7,"i",5),o.qZA(),o.qZA(),o.qZA(),o.YNc(8,_,11,10,"div",6),o.TgZ(9,"div"),o.YNc(10,P,5,4,"div",7),o.YNc(11,b,2,2,"div",8),o.qZA(),o.qZA()),2&t&&(o.Q6J("notAuthorized",e.isNotAuthorized),o.xp6(3),o.Oqu(o.lcZ(4,5,"tr_products")),o.xp6(5),o.Q6J("ngIf",e.isFilterOpen),o.xp6(2),o.Q6J("ngIf",!e.productsLoading),o.xp6(1),o.Q6J("ngIf",e.productsLoading))},directives:[h.Z,i.O5,u.Fj,u.JJ,u.On,l.t,i.sg,Z.A],pipes:[a.X$],styles:[".products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:5rem}.products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:10rem}.products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:10rem}.products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:10rem}.products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:10rem}.products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:10rem}.products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7){width:4rem}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;border-radius:30px}.product-image[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:50px!important}"]}),t})()}];let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[s.Bz.forChild(O)],s.Bz]}),t})();var q=n(4685);let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:[r.T],imports:[[i.ez,T,q.m]]}),t})()}}]);