!function(){"use strict";function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(r=i.key,o=void 0,"symbol"==typeof(o=function(t,n){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,n||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(r,"string"))?o:String(o)),i)}var r,o}function e(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[486],{8486:function(n,i,r){r.r(i),r.d(i,{ProductsModule:function(){return M}});var o=r(8583),a=r(4655),c=r(3018),s=r(4736),u=r(3462),g=r(9790),p=r(1352),d=r(2238),l=r(2019),h=r(2018),f=r(3679),Z=r(3886),m=r(2557);function v(t,n){if(1&t){var e=c.EpF();c.TgZ(0,"div",9),c.TgZ(1,"div",10),c.TgZ(2,"div",11),c.TgZ(3,"div",12),c.TgZ(4,"label"),c._uU(5),c.ALo(6,"translate"),c.ALo(7,"translate"),c.qZA(),c.TgZ(8,"div",13),c.TgZ(9,"input",14),c.NdJ("keyup",function(t){return c.CHM(e),c.oxw().filterproducts(t,"searchTerm")})("ngModelChange",function(t){return c.CHM(e),c.oxw().nameSearchTerm=t}),c.ALo(10,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){var i=c.oxw();c.xp6(5),c.AsE("",c.lcZ(6,4,"tr_name"),"/",c.lcZ(7,6,"tr_code"),""),c.xp6(4),c.s9C("placeholder",c.lcZ(10,8,"tr_search")),c.Q6J("ngModel",i.nameSearchTerm)}}function _(t,n){if(1&t){var e=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._uU(6),c.qZA(),c.TgZ(7,"td"),c._uU(8),c.qZA(),c.TgZ(9,"td"),c._uU(10),c.qZA(),c.TgZ(11,"td"),c._uU(12),c.qZA(),c.TgZ(13,"td"),c.TgZ(14,"span",23),c._UZ(15,"i",24),c.TgZ(16,"div",25),c._UZ(17,"div",26),c.TgZ(18,"div",27),c.NdJ("click",function(){var t=c.CHM(e).$implicit;return c.oxw(3).deleteProduct(t._id)}),c.TgZ(19,"div",28),c._uU(20),c.ALo(21,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){var i=n.$implicit,r=n.index;c.xp6(2),c.hij(" ",r+1,""),c.xp6(2),c.Oqu(i.name),c.xp6(2),c.Oqu(null==i.branch?null:i.branch.name),c.xp6(2),c.Oqu(i.code),c.xp6(2),c.Oqu(i.stock),c.xp6(2),c.Oqu(i.price),c.xp6(8),c.hij(" ",c.lcZ(21,7,"tr_action.Restore")," ")}}function y(t,n){if(1&t&&(c.TgZ(0,"div",20),c.TgZ(1,"table",21),c.TgZ(2,"thead"),c.TgZ(3,"tr"),c._UZ(4,"th"),c.TgZ(5,"th"),c._uU(6,"Product Name"),c.qZA(),c.TgZ(7,"th"),c._uU(8,"Branch"),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Code"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Stock"),c.qZA(),c.TgZ(13,"th"),c._uU(14,"price"),c.qZA(),c._UZ(15,"th"),c.qZA(),c.qZA(),c.TgZ(16,"tbody"),c.YNc(17,_,22,9,"tr",22),c.qZA(),c.qZA(),c.qZA()),2&t){var e=c.oxw(2);c.xp6(17),c.Q6J("ngForOf",e.productsList)}}function b(t,n){1&t&&(c.TgZ(0,"div",29),c._UZ(1,"i",30),c.TgZ(2,"p"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Oqu(c.lcZ(4,1,"tr_empty_state")))}function P(t,n){if(1&t){var e=c.EpF();c.TgZ(0,"div",15),c.YNc(1,y,18,1,"div",16),c.YNc(2,b,5,3,"div",17),c.TgZ(3,"div",18),c.TgZ(4,"pagination",19),c.NdJ("paginationUpdate",function(t){return c.CHM(e),c.oxw().paginationUpdate(t)}),c.qZA(),c.qZA(),c.qZA()}if(2&t){var i=c.oxw();c.xp6(1),c.Q6J("ngIf",i.productsList.length>0),c.xp6(1),c.Q6J("ngIf",0==i.productsList.length),c.xp6(2),c.Q6J("paginationData",i.paginationData)("perPage",i.paginationPerPage)}}function A(t,n){1&t&&(c.TgZ(0,"div"),c._UZ(1,"app-ghost-line",31),c.qZA()),2&t&&(c.xp6(1),c.Q6J("length",12)("type","table"))}var O,T=[{path:"",component:(O=function(){function n(e,i,r,o,a,c){t(this,n),this.productsService=e,this.appNotificationService=i,this.translateService=r,this.globals=o,this.dialog=a,this.CategoriesServce=c,this.productsLoading=!0,this.isFilterOpen=!0,this.paginationPerPage=10,this.categorys=[],this.productsList=[],this.categorysLoading=!1,this.fullscreenEnabled=!1,this.isNotAuthorized=!1,this.iscategoryNotAuthorized=!1,this.currentOrder={name:"",category:""},this.params={page:1,perPage:this.paginationPerPage},this.categorysParams={page:1,per_page:10},this.subscriptions=[]}return e(n,[{key:"ngOnInit",value:function(){this.getproducts(),this.getcategorys()}},{key:"getproducts",value:function(){var t=this;this.productsLoading=!0,this.subscriptions.push(this.productsService.getProducts(this.params).subscribe(function(n){t.productsList=n.products,t.paginationData=n.meta,t.productsLoading=!1},function(n){403==n.status?(t.isNotAuthorized=!0,t.productsLoading=!1):t.appNotificationService.push(t.translateService.instant("tr_unexpected_error_message"),"error")}))}},{key:"getcategorys",value:function(){var t=this;this.categorysLoading=!0,this.subscriptions.push(this.CategoriesServce.getCategorys(this.categorysParams).subscribe(function(n){t.categorysPagination=n.meta,t.categorys=t.categorys.concat(n.categories),t.categorysLoading=!1},function(n){403==n.status&&(t.iscategoryNotAuthorized=!0,t.categorysLoading=!1)}))}},{key:"nextBatch",value:function(){this.categorysPagination.nextPage&&(this.categorysLoading=!0,this.categorysParams.page=this.categorysPagination.nextPage,this.getcategorys())}},{key:"filterproducts",value:function(t,n){var e=this;clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){t="by_category_id"==n?t:t.target.value.trim(),e.params.search=t,e.params.page=1,e.getproducts()},500)}},{key:"paginationUpdate",value:function(t){this.params.page=t,this.getproducts()}},{key:"deleteProduct",value:function(t){var n=this;this.productsService.deleteProduct(t).subscribe(function(){n.params.page=1,n.getproducts()})}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(t){return t&&t.unsubscribe()})}}]),n}(),O.\u0275fac=function(t){return new(t||O)(c.Y36(s.T),c.Y36(u.o),c.Y36(g.sK),c.Y36(p.O),c.Y36(d.uw),c.Y36(l.Y))},O.\u0275cmp=c.Xpm({type:O,selectors:[["app-products-list"]],decls:12,vars:7,consts:[["not-authorized","",1,"content-shadow","bg-white","mb-5",3,"notAuthorized"],[1,"size-body","title-with-btn","plr-4","ptb-4"],[1,"page-title"],[1,"btn-group"],[1,"s-btn","btn-secondary","size-body",3,"click"],["aria-hidden","false",1,"fa","fa-filter","text-primary"],["class","filters-card bg-secondary plr-4 ptb-2 mb-7",4,"ngIf"],["class","plr-4 mt-4",4,"ngIf"],[4,"ngIf"],[1,"filters-card","bg-secondary","plr-4","ptb-2","mb-7"],[1,"row"],[1,"col-md-3"],[1,"form-group","mb-0"],[1,"input-with-icon","bg-white","width-100"],[1,"s-control",3,"placeholder","ngModel","keyup","ngModelChange"],[1,"plr-4","mt-4"],["class","table-container products-list","id","table-container",4,"ngIf"],["class","empty-state-here text-center ptb-8",4,"ngIf"],[1,"plr-4","ptb-4"],[3,"paginationData","perPage","paginationUpdate"],["id","table-container",1,"table-container","products-list"],[1,"s-table","table","layout-fixed","products-list"],[4,"ngFor","ngForOf"],[1,"options-menu"],["aria-hidden","true",1,"fa","fa-ellipsis-v"],[1,"options-menu-container","p-0"],[1,"border-bottom"],[1,"single-option",3,"click"],[1,"text-error"],[1,"empty-state-here","text-center","ptb-8"],[1,"fa","fa-folder-open","empty-icon","text-primary"],[3,"length","type"]],template:function(t,n){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"h2",1),c.TgZ(2,"span",2),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"div",3),c.TgZ(6,"button",4),c.NdJ("click",function(){return n.isFilterOpen=!n.isFilterOpen}),c._UZ(7,"i",5),c.qZA(),c.qZA(),c.qZA(),c.YNc(8,v,11,10,"div",6),c.TgZ(9,"div"),c.YNc(10,P,5,4,"div",7),c.YNc(11,A,2,2,"div",8),c.qZA(),c.qZA()),2&t&&(c.Q6J("notAuthorized",n.isNotAuthorized),c.xp6(3),c.Oqu(c.lcZ(4,5,"tr_products")),c.xp6(5),c.Q6J("ngIf",n.isFilterOpen),c.xp6(2),c.Q6J("ngIf",!n.productsLoading),c.xp6(1),c.Q6J("ngIf",n.productsLoading))},directives:[h.Z,o.O5,f.Fj,f.JJ,f.On,Z.t,o.sg,m.A],pipes:[g.X$],styles:[".products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:5rem}.products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:10rem}.products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:10rem}.products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:10rem}.products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:10rem}.products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:10rem}.products-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(7), .products-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(7){width:4rem}.product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;border-radius:30px}.product-image[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:50px!important}"]}),O)}],q=function(){var n=e(function n(){t(this,n)});return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[a.Bz.forChild(T)],a.Bz]}),n}(),C=r(4685),M=function(){var n=e(function n(){t(this,n)});return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[s.T],imports:[[o.ez,q,C.m]]}),n}()}}])}();