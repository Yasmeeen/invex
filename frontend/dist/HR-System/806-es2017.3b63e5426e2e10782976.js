"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[806],{1806:function(t,e,i){i.r(e),i.d(e,{OrdersModule:function(){return I}});var n=i(8583),r=i(4655),o=i(3018),a=i(1841),s=i(2238),d=i(7677),c=i(3342),l=i(3462);let g=(()=>{class t{constructor(t,e){this.http=t,this.appNotificationService=e}getProducts(t){return this.http.get(d.NL,{params:t})}getProduct(t){return this.http.get(d.NL+`/${t}`)}createProduct(t){return this.http.post(d.qq,t)}updateProduct(t,e){return this.http.put(d._M+`/${e}`,t).pipe((0,c.b)({error:t=>{this.appNotificationService.push("Update Product Failed","error")}}))}deleteProduct(t){return this.http.delete(d.Fy+"/"+t).pipe((0,c.b)({error:t=>{this.appNotificationService.push("Delete Product Failed","error")}}))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(a.eN),o.LFG(l.o))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),u=(()=>{class t{constructor(t,e){this.http=t,this.appNotificationService=e}getOrders(t){return this.http.get(d.pM,{params:t})}getOrder(t){return this.http.get(d.pM+`/${t}`)}createOrder(t){return this.http.post(d.x7,t)}updateOrder(t){return this.http.put(d.uF,t).pipe((0,c.b)({error:t=>{this.appNotificationService.push("Update Order Failed","error")}}))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(a.eN),o.LFG(l.o))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=i(3679),Z=i(6640),h=i(9790);function A(t,e){1&t&&(o.TgZ(0,"span",41),o._uU(1," Client name is required. "),o.qZA())}function q(t,e){1&t&&(o.TgZ(0,"span",41),o._uU(1," phone number is required. "),o.qZA())}function m(t,e){1&t&&(o.TgZ(0,"span",41),o._uU(1," phone number is required. "),o.qZA())}function f(t,e){1&t&&(o.TgZ(0,"span",41),o._uU(1," client address is required. "),o.qZA())}function T(t,e){1&t&&(o.TgZ(0,"span",41),o._uU(1," Product code is required. "),o.qZA())}function b(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",42),o.TgZ(1,"div",11),o.TgZ(2,"div",43),o.TgZ(3,"label"),o._uU(4,"delete"),o.qZA(),o.TgZ(5,"button",44),o.NdJ("click",function(){const e=o.CHM(t).index;return o.oxw().removeProduct(e)}),o._UZ(6,"i",45),o.qZA(),o.qZA(),o.TgZ(7,"div",12),o.TgZ(8,"div",13),o.TgZ(9,"label",14),o._uU(10,"Products Code"),o.qZA(),o.TgZ(11,"div",46),o.TgZ(12,"ng-select",47,48),o.NdJ("ngModelChange",function(e){return o.CHM(t).$implicit.selectedProduct=e}),o.ALo(14,"translate"),o.qZA(),o._UZ(15,"i",49),o.qZA(),o.YNc(16,T,2,0,"span",17),o.qZA(),o.qZA(),o.TgZ(17,"div",50),o.TgZ(18,"div",13),o.TgZ(19,"label",14),o._uU(20,"Quantity"),o.qZA(),o.TgZ(21,"input",51),o.NdJ("ngModelChange",function(e){return o.CHM(t).$implicit.quantity=e})("input",function(){return o.CHM(t),o.oxw().calculateTotalPrice()}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(22,"div",50),o.TgZ(23,"div",13),o.TgZ(24,"label"),o._uU(25,"Price"),o.qZA(),o.TgZ(26,"div",52),o._uU(27),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=e.$implicit,i=e.index,n=o.MAs(13),r=o.oxw(),a=o.MAs(12);o.xp6(8),o.ekj("has-error",n.invalid&&a.submitted),o.xp6(4),o.s9C("placeholder",o.lcZ(14,11,"tr_select")),o.MGl("name","product",i,""),o.Q6J("clearable",!1)("ngModel",t.selectedProduct)("items",r.products),o.xp6(4),o.Q6J("ngIf",n.invalid&&a.submitted),o.xp6(5),o.MGl("name","quantity",i,""),o.Q6J("ngModel",t.quantity),o.xp6(6),o.Oqu(t.selectedProduct.price)}}let _=(()=>{class t{constructor(t,e,i,n){this.http=t,this.dialogRef=e,this.productsSerivce=i,this.ordersSerivce=n,this.todayDate=new Date,this.order={clientName:"",clientPhoneNumber:"",clientAddress:"",sellerName:""},this.orderProducts=[{_id:"",code:"",name:"",quantity:1,price:0,discount:0,selectedProduct:{}}],this.totalPrice=0,this.products=[]}ngOnInit(){this.getProducts()}getProducts(){this.productsSerivce.getProducts({}).subscribe(t=>{this.products=t.products})}fetchProductDetails(t){const e=this.orderProducts[t].code;!e||this.http.get(`/api/products/code/${e}`).subscribe(e=>{this.orderProducts[t]._id=e._id,this.orderProducts[t].name=e.name,this.orderProducts[t].price=e.price,this.calculateTotalPrice()})}calculateTotalPrice(){this.totalPrice=this.orderProducts.reduce((t,e)=>t+(e.price-e.price*(e.discount||0)/100)*e.quantity,0)}addProductRow(){this.orderProducts.push({_id:"",code:"",name:"",quantity:1,price:0,discount:0,selectedProduct:{}})}removeProduct(t){this.orderProducts.splice(t,1),this.calculateTotalPrice()}submitForm(){var t;[].concat(...this.orderProducts.map(t=>Array(t.quantity).fill(t._id))),console.log("this.orderProducts",this.orderProducts);const e={clientName:this.order.clientName,clientPhoneNumber:this.order.clientPhoneNumber,clientAddress:this.order.clientAddress,sellerName:this.order.sellerName,products:this.orderProducts.map(t=>t.selectedProduct._id),branch:null===(t=this.order.branch)||void 0===t?void 0:t._id};this.ordersSerivce.createOrder(e).subscribe(t=>{console.log("Order submitted",t),this.closeModal(!0),this.printInvoice()})}closeModal(t){this.dialogRef.close(t)}printInvoice(){window.print()}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(a.eN),o.Y36(s.so),o.Y36(g),o.Y36(u))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-add-order"]],decls:222,vars:22,consts:[[1,"complex-modal"],[1,"modal-wrapper"],[1,"close-modal-icon",3,"click"],[1,"modal-content"],["modalContent",""],[1,"modal-header","border-bottom"],[1,"steel","weight-medium","size-default","m-0"],[1,"modal-body","weight-medium","steel"],[1,"add-student-modal-container"],[1,"content-container","plr-4","ptb-3"],["orderForm","ngForm"],[1,"row"],[1,"col-md-4"],[1,"form-group"],["for",""],["type","text","name","clientName","required","",1,"s-control",3,"ngModel","ngModelChange"],["clientName","ngModel"],["class","text-error size-small validator",4,"ngIf"],["type","text","name","clientPhone","required","",1,"s-control",3,"ngModel","ngModelChange"],["clientPhone","ngModel"],["type","text","name","sellerName","required","",1,"s-control",3,"ngModel","ngModelChange"],["sellerName","ngModel"],["type","text","name","clientAddress","required","",1,"s-control",3,"ngModel","ngModelChange"],["clientAddress","ngModel"],[1,"row","mt-6"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12","mt-2","flex","flex-end"],["type","button",1,"s-btn","btn-primary",3,"click"],[1,"fa","fa-plus","mr-1"],[1,"modal-footer","mt-3","text-right"],[1,"s-btn","btn-secondary","mr-3",3,"click"],[1,"s-btn","btn-primary","mr-3",3,"click"],[1,"s-btn","btn-primary",3,"click"],["id","print-container",1,"invoice-container"],[1,"center"],[1,"bold"],[1,"dashed"],["colspan","3"],[1,"total"],[1,"double-border"],[1,"final-total"],[1,"text-error","size-small","validator"],[1,"col-12"],[1,"col-md-2"],["type","button",1,"s-btn","btn-sm","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"input-with-icon","bg-white"],["bindLabel","code","required","",1,"s-control","s-select",3,"placeholder","clearable","ngModel","name","items","ngModelChange"],["productCodes","ngModel"],[1,"fa","fa-search","input-icon"],[1,"col-md-3"],["type","number","required","","min","1",1,"s-control",3,"ngModel","name","ngModelChange","input"],[1,"mt-3"]],template:function(t,e){if(1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.NdJ("click",function(){return e.closeModal()}),o.qZA(),o.TgZ(3,"div",3,4),o.TgZ(5,"div",5),o.TgZ(6,"h3",6),o._uU(7,"New Order"),o.qZA(),o.qZA(),o.TgZ(8,"div",7),o.TgZ(9,"div",8),o.TgZ(10,"div",9),o.TgZ(11,"form",null,10),o.TgZ(13,"div",11),o.TgZ(14,"div",12),o.TgZ(15,"div",13),o.TgZ(16,"label",14),o._uU(17,"Client Name"),o.qZA(),o.TgZ(18,"input",15,16),o.NdJ("ngModelChange",function(t){return e.order.clientName=t}),o.qZA(),o.YNc(20,A,2,0,"span",17),o.qZA(),o.qZA(),o.TgZ(21,"div",12),o.TgZ(22,"div",13),o.TgZ(23,"label",14),o._uU(24,"Client Phone"),o.qZA(),o.TgZ(25,"input",18,19),o.NdJ("ngModelChange",function(t){return e.order.clientPhoneNumber=t}),o.qZA(),o.YNc(27,q,2,0,"span",17),o.qZA(),o.qZA(),o.TgZ(28,"div",12),o.TgZ(29,"div",13),o.TgZ(30,"label",14),o._uU(31,"seller name"),o.qZA(),o.TgZ(32,"input",20,21),o.NdJ("ngModelChange",function(t){return e.order.sellerName=t}),o.qZA(),o.YNc(34,m,2,0,"span",17),o.qZA(),o.qZA(),o.TgZ(35,"div",12),o.TgZ(36,"div",13),o.TgZ(37,"label",14),o._uU(38,"client Address"),o.qZA(),o.TgZ(39,"input",22,23),o.NdJ("ngModelChange",function(t){return e.order.clientAddress=t}),o.qZA(),o.YNc(41,f,2,0,"span",17),o.qZA(),o.qZA(),o.qZA(),o.TgZ(42,"div",24),o.YNc(43,b,28,13,"div",25),o.TgZ(44,"div",26),o.TgZ(45,"button",27),o.NdJ("click",function(){return e.addProductRow()}),o._UZ(46,"i",28),o._uU(47,"Add Product "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(48,"div",29),o.TgZ(49,"button",30),o.NdJ("click",function(){return e.closeModal()}),o._uU(50,"Cancel"),o.qZA(),o.TgZ(51,"button",31),o.NdJ("click",function(){return e.submitForm()}),o._uU(52,"Save & Print"),o.qZA(),o.TgZ(53,"button",32),o.NdJ("click",function(){return e.printInvoice()}),o._uU(54,"Print"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(55,"div",33),o.TgZ(56,"div",34),o.TgZ(57,"div",35),o._uU(58,"solddoutt store"),o.qZA(),o.qZA(),o.TgZ(59,"table"),o.TgZ(60,"tr"),o.TgZ(61,"td"),o._uU(62,"\u0627\u0644\u0639\u0645\u064a\u0644:"),o.qZA(),o.TgZ(63,"td"),o._uU(64),o.qZA(),o.qZA(),o.TgZ(65,"tr"),o.TgZ(66,"td"),o._uU(67,"\u0627\u0644\u0647\u0627\u062a\u0641:"),o.qZA(),o.TgZ(68,"td"),o._uU(69),o.qZA(),o.qZA(),o.TgZ(70,"tr"),o.TgZ(71,"td"),o._uU(72,"\u0627\u0644\u0639\u0646\u0648\u0627\u0646:"),o.qZA(),o.TgZ(73,"td"),o._uU(74),o.qZA(),o.qZA(),o.qZA(),o._UZ(75,"div",36),o.TgZ(76,"table"),o.TgZ(77,"tr"),o.TgZ(78,"td"),o._uU(79,"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629:"),o.qZA(),o.TgZ(80,"td"),o._uU(81,"4431"),o.qZA(),o.TgZ(82,"td"),o._uU(83,"\u0639\u062f\u062f \u0627\u0644\u0645\u0648\u0627\u062f:"),o.qZA(),o.TgZ(84,"td"),o._uU(85),o.qZA(),o.qZA(),o.TgZ(86,"tr"),o.TgZ(87,"td"),o._uU(88,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e:"),o.qZA(),o.TgZ(89,"td",37),o._uU(90),o.qZA(),o.qZA(),o.qZA(),o._UZ(91,"div",36),o.TgZ(92,"table"),o.TgZ(93,"tr",35),o.TgZ(94,"td"),o._uU(95,"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"),o.qZA(),o.TgZ(96,"td"),o._uU(97,"\u0627\u0644\u0643\u0645\u064a\u0629"),o.qZA(),o.TgZ(98,"td"),o._uU(99,"\u0627\u0644\u0633\u0639\u0631"),o.qZA(),o.TgZ(100,"td"),o._uU(101,"\u0627\u0644\u0627\u0633\u0645"),o.qZA(),o.qZA(),o.TgZ(102,"tr"),o.TgZ(103,"td"),o._uU(104,"700.00"),o.qZA(),o.TgZ(105,"td"),o._uU(106,"1.00"),o.qZA(),o.TgZ(107,"td"),o._uU(108,"700.00"),o.qZA(),o.TgZ(109,"td"),o._uU(110,"ZARA QUARTER ZIPPER"),o.qZA(),o.qZA(),o.TgZ(111,"tr"),o.TgZ(112,"td"),o._uU(113,"700.00"),o.qZA(),o.TgZ(114,"td"),o._uU(115,"1.00"),o.qZA(),o.TgZ(116,"td"),o._uU(117,"700.00"),o.qZA(),o.TgZ(118,"td"),o._uU(119,"moncler"),o.qZA(),o.qZA(),o.TgZ(120,"tr"),o.TgZ(121,"td"),o._uU(122,"700.00"),o.qZA(),o.TgZ(123,"td"),o._uU(124,"1.00"),o.qZA(),o.TgZ(125,"td"),o._uU(126,"700.00"),o.qZA(),o.TgZ(127,"td"),o._uU(128,"ae reflect"),o.qZA(),o.qZA(),o.TgZ(129,"tr"),o.TgZ(130,"td"),o._uU(131,"1300.00"),o.qZA(),o.TgZ(132,"td"),o._uU(133,"2.00"),o.qZA(),o.TgZ(134,"td"),o._uU(135,"650.00"),o.qZA(),o.TgZ(136,"td"),o._uU(137,"kenzo"),o.qZA(),o.qZA(),o.TgZ(138,"tr"),o.TgZ(139,"td"),o._uU(140,"2400.00"),o.qZA(),o.TgZ(141,"td"),o._uU(142,"3.00"),o.qZA(),o.TgZ(143,"td"),o._uU(144,"800.00"),o.qZA(),o.TgZ(145,"td"),o._uU(146,"p&b"),o.qZA(),o.qZA(),o.TgZ(147,"tr"),o.TgZ(148,"td"),o._uU(149,"700.00"),o.qZA(),o.TgZ(150,"td"),o._uU(151,"1.00"),o.qZA(),o.TgZ(152,"td"),o._uU(153,"700.00"),o.qZA(),o.TgZ(154,"td"),o._uU(155,"phlip plein"),o.qZA(),o.qZA(),o.TgZ(156,"tr"),o.TgZ(157,"td"),o._uU(158,"650.00"),o.qZA(),o.TgZ(159,"td"),o._uU(160,"1.00"),o.qZA(),o.TgZ(161,"td"),o._uU(162,"650.00"),o.qZA(),o.TgZ(163,"td"),o._uU(164,"one piece"),o.qZA(),o.qZA(),o.qZA(),o._UZ(165,"div",36),o.TgZ(166,"table"),o.TgZ(167,"tr",38),o.TgZ(168,"td"),o._uU(169,"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629:"),o.qZA(),o.TgZ(170,"td"),o._uU(171,"7,150.00"),o.qZA(),o.qZA(),o.TgZ(172,"tr"),o.TgZ(173,"td"),o._uU(174,"% \u0627\u0644\u062e\u0635\u0645:"),o.qZA(),o.TgZ(175,"td"),o._uU(176,"0"),o.qZA(),o.qZA(),o.TgZ(177,"tr"),o.TgZ(178,"td"),o._uU(179,"\u0645\u0628\u0644\u063a \u0627\u0644\u062e\u0635\u0645:"),o.qZA(),o.TgZ(180,"td"),o._uU(181,"2,350.00"),o.qZA(),o.qZA(),o.TgZ(182,"tr"),o.TgZ(183,"td"),o._uU(184,"% \u0627\u0644\u0636\u0631\u064a\u0628\u0629:"),o.qZA(),o.TgZ(185,"td"),o._uU(186,"0"),o.qZA(),o.qZA(),o.TgZ(187,"tr"),o.TgZ(188,"td"),o._uU(189,"\u0645\u0628\u0644\u063a \u0627\u0644\u0636\u0631\u064a\u0628\u0629:"),o.qZA(),o.TgZ(190,"td"),o._uU(191,"0.00"),o.qZA(),o.qZA(),o.qZA(),o._UZ(192,"div",36),o.TgZ(193,"table"),o.TgZ(194,"tr"),o.TgZ(195,"td"),o._uU(196,"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639:"),o.qZA(),o.TgZ(197,"td"),o._uU(198,"4,800.00"),o.qZA(),o.qZA(),o.TgZ(199,"tr"),o.TgZ(200,"td"),o._uU(201,"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a \u0645\u0631\u062a\u062c\u0639:"),o.qZA(),o.TgZ(202,"td"),o._uU(203,"0.00"),o.qZA(),o.qZA(),o.TgZ(204,"tr"),o.TgZ(205,"td"),o._uU(206,"\u0645\u0628\u0644\u063a \u0630\u0645\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629:"),o.qZA(),o.TgZ(207,"td"),o._uU(208,"0.00"),o.qZA(),o.qZA(),o.qZA(),o._UZ(209,"div",39),o.TgZ(210,"div",40),o._uU(211,"\u0635\u0627\u0641\u064a \u0642\u064a\u0645\u0629 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),o._UZ(212,"br"),o._uU(213,"4,800.00"),o.qZA(),o._UZ(214,"div",39),o.TgZ(215,"div",34),o.TgZ(216,"div",35),o._uU(217,"solddoutt store"),o.qZA(),o.TgZ(218,"div"),o._uU(219,"\u0645\u062f\u064a\u0646\u0629 \u0646\u0635\u0631\u060c \u0634\u0627\u0631\u0639 \u0627\u0644\u0637\u0627\u0642\u0629 \u0628\u062c\u0648\u0627\u0631 \u0627\u0644\u0646\u0627\u062f\u064a \u0627\u0644\u0623\u0647\u0644\u064a"),o.qZA(),o.TgZ(220,"div"),o._uU(221,"01150564880"),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.MAs(12),i=o.MAs(19),n=o.MAs(26),r=o.MAs(33),a=o.MAs(40);o.xp6(15),o.ekj("has-error",i.invalid&&t.submitted),o.xp6(3),o.Q6J("ngModel",e.order.clientName),o.xp6(2),o.Q6J("ngIf",i.invalid&&t.submitted),o.xp6(2),o.ekj("has-error",n.invalid&&t.submitted),o.xp6(3),o.Q6J("ngModel",e.order.clientPhoneNumber),o.xp6(2),o.Q6J("ngIf",n.invalid&&t.submitted),o.xp6(2),o.ekj("has-error",r.invalid&&t.submitted),o.xp6(3),o.Q6J("ngModel",e.order.sellerName),o.xp6(2),o.Q6J("ngIf",r.invalid&&t.submitted),o.xp6(2),o.ekj("has-error",a.invalid&&t.submitted),o.xp6(3),o.Q6J("ngModel",e.order.clientAddress),o.xp6(2),o.Q6J("ngIf",a.invalid&&t.submitted),o.xp6(2),o.Q6J("ngForOf",e.orderProducts),o.xp6(21),o.Oqu(e.order.clientName),o.xp6(5),o.Oqu(e.order.clientPhoneNumber),o.xp6(5),o.Oqu(e.order.clientAddress),o.xp6(11),o.Oqu(null==e.order.products?null:e.order.products.length),o.xp6(5),o.Oqu(e.todayDate)}},directives:[p._Y,p.JL,p.F,p.Fj,p.Q7,p.JJ,p.On,n.O5,n.sg,Z.w9,p.qQ,p.wV],pipes:[h.X$],styles:['.invoice-container[_ngcontent-%COMP%]{font-family:"Courier New",Courier,monospace;direction:rtl;text-align:right;padding:10px;width:400px;margin:auto;background-color:#fff;color:#000}.center[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.dashed[_ngcontent-%COMP%]{border-top:1px dashed black;margin:10px 0}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:14px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:4px;text-align:right}.total[_ngcontent-%COMP%], .bold[_ngcontent-%COMP%]{font-weight:bold}.double-border[_ngcontent-%COMP%]{border-top:2px solid black;border-bottom:2px solid black;margin:10px 0}.final-total[_ngcontent-%COMP%]{font-size:18px;font-weight:bold;text-align:center}#print-container[_ngcontent-%COMP%]{display:none}@media print{body[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .modal-wrapper[_ngcontent-%COMP%]{visibility:hidden}#print-container[_ngcontent-%COMP%], #print-container[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:visible;width:400px;margin:0 auto;position:relative;top:0;left:0}#print-container[_ngcontent-%COMP%]{display:block;position:absolute;top:0;left:0;width:100%}}']}),t})();var v=i(1352),x=i(2019),C=i(2018),U=i(3886),P=i(2557);function N(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",10),o.TgZ(1,"div",11),o.TgZ(2,"div",12),o.TgZ(3,"div",13),o.TgZ(4,"label"),o._uU(5),o.ALo(6,"translate"),o.ALo(7,"translate"),o.qZA(),o.TgZ(8,"div",14),o.TgZ(9,"input",15),o.NdJ("keyup",function(e){return o.CHM(t),o.oxw().filterorders(e,"searchTerm")})("ngModelChange",function(e){return o.CHM(t),o.oxw().nameSearchTerm=e}),o.ALo(10,"translate"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(5),o.AsE("",o.lcZ(6,4,"tr_name"),"/",o.lcZ(7,6,"tr_code"),""),o.xp6(4),o.s9C("placeholder",o.lcZ(10,8,"tr_search")),o.Q6J("ngModel",t.nameSearchTerm)}}function O(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"tr"),o.TgZ(1,"td"),o._uU(2),o.qZA(),o.TgZ(3,"td"),o._uU(4),o.qZA(),o.TgZ(5,"td"),o._uU(6),o.qZA(),o.TgZ(7,"td"),o._uU(8),o.qZA(),o.TgZ(9,"td"),o._uU(10),o.qZA(),o.TgZ(11,"td"),o.TgZ(12,"span",24),o._UZ(13,"i",25),o.TgZ(14,"div",26),o.TgZ(15,"div",27),o.NdJ("click",function(){const e=o.CHM(t).$implicit;return o.oxw(3).createOrEditOrder(!0,e)}),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=e.$implicit;o.xp6(2),o.Oqu(t._id),o.xp6(2),o.Oqu(t.clientName),o.xp6(2),o.Oqu(null==t.branch?null:t.branch.name),o.xp6(2),o.Oqu(t.numberOfProducts),o.xp6(2),o.Oqu(t.totalPrice)}}function M(t,e){if(1&t&&(o.TgZ(0,"div",21),o.TgZ(1,"table",22),o.TgZ(2,"thead"),o.TgZ(3,"tr"),o.TgZ(4,"th"),o._uU(5,"Order Number"),o.qZA(),o.TgZ(6,"th"),o._uU(7,"Client Name"),o.qZA(),o.TgZ(8,"th"),o._uU(9,"Branch"),o.qZA(),o.TgZ(10,"th"),o._uU(11,"Number Of Products"),o.qZA(),o.TgZ(12,"th"),o._uU(13,"price"),o.qZA(),o._UZ(14,"th"),o.qZA(),o.qZA(),o.TgZ(15,"tbody"),o.YNc(16,O,16,5,"tr",23),o.qZA(),o.qZA(),o.qZA()),2&t){const t=o.oxw(2);o.xp6(16),o.Q6J("ngForOf",t.ordersList)}}function w(t,e){1&t&&(o.TgZ(0,"div",28),o._UZ(1,"img",29),o.TgZ(2,"p"),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.qZA()),2&t&&(o.xp6(3),o.Oqu(o.lcZ(4,1,"tr_empty_state")))}function y(t,e){1&t&&(o.TgZ(0,"div",28),o._UZ(1,"i",30),o.TgZ(2,"p",31),o._uU(3,"No items found."),o.qZA(),o.qZA())}function k(t,e){if(1&t){const t=o.EpF();o.TgZ(0,"div",16),o.YNc(1,M,17,1,"div",17),o.YNc(2,w,5,3,"div",18),o.YNc(3,y,4,0,"div",18),o.TgZ(4,"div",19),o.TgZ(5,"pagination",20),o.NdJ("paginationUpdate",function(e){return o.CHM(t),o.oxw().paginationUpdate(e)}),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.ordersList.length>0),o.xp6(1),o.Q6J("ngIf",0==t.ordersList.length),o.xp6(1),o.Q6J("ngIf",0==t.ordersList.length),o.xp6(2),o.Q6J("paginationData",t.paginationData)("perPage",t.paginationPerPage)}}function J(t,e){1&t&&(o.TgZ(0,"div"),o._UZ(1,"app-ghost-line",32),o.qZA()),2&t&&(o.xp6(1),o.Q6J("length",12)("type","table"))}const F=[{path:"",component:(()=>{class t{constructor(t,e,i,n,r,o){this.ordersService=t,this.appNotificationService=e,this.translateService=i,this.globals=n,this.dialog=r,this.CategoriesServce=o,this.ordersLoading=!0,this.isFilterOpen=!0,this.paginationPerPage=10,this.ordersList=[],this.categorysLoading=!1,this.fullscreenEnabled=!1,this.isNotAuthorized=!1,this.iscategoryNotAuthorized=!1,this.currentOrder={name:"",category:""},this.params={page:1,perPage:this.paginationPerPage},this.categorysParams={page:1,per_page:10},this.subscriptions=[]}ngOnInit(){this.getOrders()}getOrders(){this.ordersLoading=!0,this.subscriptions.push(this.ordersService.getOrders(this.params).subscribe(t=>{this.ordersList=t.orders,this.paginationData=t.meta,this.ordersLoading=!1},t=>{403==t.status?(this.isNotAuthorized=!0,this.ordersLoading=!1):this.appNotificationService.push(this.translateService.instant("tr_unexpected_error_message"),"error")}))}filterorders(t,e){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{t="by_category_id"==e?t:t.target.value.trim(),this.params.search=t,this.params.page=1,this.getOrders()},500)}paginationUpdate(t){this.params.page=t,this.getOrders()}createOrEditOrder(t,e){this.dialog.open(_,{width:"850px",data:{isEdit:t,order:e,orderId:null==e?void 0:e._id},disableClose:!0}).afterClosed().subscribe(t=>{t&&this.getOrders()})}ngOnDestroy(){this.subscriptions.forEach(t=>t&&t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(u),o.Y36(l.o),o.Y36(h.sK),o.Y36(v.O),o.Y36(s.uw),o.Y36(x.Y))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-orders-list"]],decls:15,vars:10,consts:[["not-authorized","",1,"content-shadow","bg-white","mb-5",3,"notAuthorized"],[1,"size-body","title-with-btn","plr-4","ptb-4"],[1,"page-title"],[1,"btn-group"],[1,"s-btn","btn-primary",3,"click"],[1,"s-btn","btn-secondary","size-body",3,"click"],["aria-hidden","false",1,"fa","fa-filter","text-primary"],["class","filters-card bg-secondary plr-4 ptb-2 mb-7",4,"ngIf"],["class","plr-4 mt-4",4,"ngIf"],[4,"ngIf"],[1,"filters-card","bg-secondary","plr-4","ptb-2","mb-7"],[1,"row"],[1,"col-md-3"],[1,"form-group","mb-0"],[1,"input-with-icon","bg-white","width-100"],[1,"s-control",3,"placeholder","ngModel","keyup","ngModelChange"],[1,"plr-4","mt-4"],["class","table-container orders-list","id","table-container",4,"ngIf"],["class","empty-state-here text-center ptb-8",4,"ngIf"],[1,"plr-4","ptb-4"],[3,"paginationData","perPage","paginationUpdate"],["id","table-container",1,"table-container","orders-list"],[1,"s-table","table","orders-table","layout-fixed","orders-list"],[4,"ngFor","ngForOf"],[1,"options-menu"],["aria-hidden","true",1,"fa","fa-ellipsis-v"],[1,"options-menu-container","p-0"],[1,"single-option",3,"click"],[1,"empty-state-here","text-center","ptb-8"],["src","assets/images/placeholders/announcments.svg","alt","",1,"placeholder-icon"],[1,"fas","fa-box-open","empty-icon"],[1,"empty-text"],[3,"length","type"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"h2",1),o.TgZ(2,"span",2),o._uU(3),o.ALo(4,"translate"),o.qZA(),o.TgZ(5,"div",3),o.TgZ(6,"button",4),o.NdJ("click",function(){return e.createOrEditOrder(!1)}),o._uU(7),o.ALo(8,"translate"),o.qZA(),o.TgZ(9,"button",5),o.NdJ("click",function(){return e.isFilterOpen=!e.isFilterOpen}),o._UZ(10,"i",6),o.qZA(),o.qZA(),o.qZA(),o.YNc(11,N,11,10,"div",7),o.TgZ(12,"div"),o.YNc(13,k,6,5,"div",8),o.YNc(14,J,2,2,"div",9),o.qZA(),o.qZA()),2&t&&(o.Q6J("notAuthorized",e.isNotAuthorized),o.xp6(3),o.Oqu(o.lcZ(4,6,"tr_orders")),o.xp6(4),o.hij(" ",o.lcZ(8,8,"tr_add_order")," "),o.xp6(4),o.Q6J("ngIf",e.isFilterOpen),o.xp6(2),o.Q6J("ngIf",!e.ordersLoading),o.xp6(1),o.Q6J("ngIf",e.ordersLoading))},directives:[C.Z,n.O5,p.Fj,p.JJ,p.On,U.t,n.sg,P.A],pipes:[h.X$],styles:[".orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(1), .orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(1){width:15rem}.orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(2), .orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2){width:10rem}.orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(3), .orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(3){width:10rem}.orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(4), .orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(4){width:13rem}.orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(5), .orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(5){width:10rem}.orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:nth-child(6), .orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(6){width:2rem}"]}),t})()}];let S=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[r.Bz.forChild(F)],r.Bz]}),t})();var Y=i(4685);let I=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:[u],imports:[[n.ez,S,Y.m]]}),t})()},2557:function(t,e,i){i.d(e,{A:function(){return u}});var n=i(3018),r=i(8583);function o(t,e){1&t&&(n.TgZ(0,"th"),n._UZ(1,"div",6),n.qZA())}function a(t,e){1&t&&(n.TgZ(0,"td"),n._UZ(1,"div",6),n.qZA())}function s(t,e){if(1&t&&(n.TgZ(0,"tr"),n.YNc(1,a,2,0,"td",5),n.qZA()),2&t){const t=n.oxw(2);n.xp6(1),n.Q6J("ngForOf"," ".repeat(t.length/2).split(""))}}function d(t,e){if(1&t&&(n.TgZ(0,"div",3),n.TgZ(1,"table",4),n.TgZ(2,"thead"),n.TgZ(3,"tr"),n.YNc(4,o,2,0,"th",5),n.qZA(),n.qZA(),n.TgZ(5,"tbody"),n.YNc(6,s,2,1,"tr",5),n.qZA(),n.qZA(),n.qZA()),2&t){const t=n.oxw();n.xp6(4),n.Q6J("ngForOf"," ".repeat(t.length/2).split("")),n.xp6(2),n.Q6J("ngForOf"," ".repeat(t.length).split(""))}}function c(t,e){if(1&t&&(n.TgZ(0,"div"),n._UZ(1,"div",6),n.qZA()),2&t){const t=n.oxw();n.xp6(1),n.Udp("height",t.height?t.height+"px":"")("width",t.width?t.width+"px":"")}}function l(t,e){if(1&t&&n._UZ(0,"div",6),2&t){const t=n.oxw(2);n.Udp("width",t.width?t.width+"px":"")("height",t.height?t.height+"px":"")}}function g(t,e){if(1&t&&(n.TgZ(0,"div"),n.YNc(1,l,1,4,"div",7),n.qZA()),2&t){const t=n.oxw();n.xp6(1),n.Q6J("ngForOf"," ".repeat(t.length).split(""))}}let u=(()=>{class t{constructor(){this.length=10,this.type="line"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-ghost-line"]],inputs:{length:"length",height:"height",width:"width",type:"type"},decls:4,vars:3,consts:[[1,"container"],["class","table-container",4,"ngIf"],[4,"ngIf"],[1,"table-container"],[1,"s-table","table","layout-fixed"],[4,"ngFor","ngForOf"],[1,"line"],["class","line",3,"width","height",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0),n.YNc(1,d,7,2,"div",1),n.YNc(2,c,2,4,"div",2),n.YNc(3,g,2,1,"div",2),n.qZA()),2&t&&(n.xp6(1),n.Q6J("ngIf","table"==e.type),n.xp6(1),n.Q6J("ngIf","line"==e.type),n.xp6(1),n.Q6J("ngIf","list"==e.type))},directives:[r.O5,r.sg],styles:[".container[_ngcontent-%COMP%]{height:100%}.line[_ngcontent-%COMP%]{margin-top:12px;border-radius:2px;background-image:linear-gradient(90deg,#ddd 0px,#e8e8e8 40px,#ddd 80px);background-size:600px;animation:shine-lines 1.6s infinite linear}.line[_ngcontent-%COMP%]{margin-top:11px}.line[_ngcontent-%COMP%]{background-color:#ddd}table[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{width:120px;height:10px}@keyframes shine-lines{0%{background-position:-100px}40%,to{background-position:140px}}@keyframes shine-avatar{0%{background-position:-32px}40%,to{background-position:208px}}"]}),t})()},2018:function(t,e,i){i.d(e,{Z:function(){return l}});var n=i(3018),r=i(1352),o=i(8583),a=i(9790);const s=["not-authorized",""];function d(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"div",2),n.TgZ(1,"div",3),n.TgZ(2,"div",4),n._UZ(3,"img",5),n.qZA(),n.TgZ(4,"p",6),n._uU(5," 403 "),n.qZA(),n.TgZ(6,"p",7),n._uU(7),n.ALo(8,"translate"),n.qZA(),n.TgZ(9,"div",8),n.TgZ(10,"button",9),n.NdJ("click",function(){return n.CHM(t),n.oxw().callBack()}),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA()}2&t&&(n.xp6(7),n.hij(" ",n.lcZ(8,2,"tr_not_authorized")," "),n.xp6(4),n.hij(" ",n.lcZ(12,4,"tr_go_back")," "))}const c=["*"];let l=(()=>{class t{constructor(t,e){this.globals=t,this.location=e,this.notAuthorized=!0}ngOnInit(){}callBack(){this.location.back()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(r.O),n.Y36(o.Ye))},t.\u0275cmp=n.Xpm({type:t,selectors:[["","not-authorized",""]],inputs:{notAuthorized:"notAuthorized"},attrs:s,ngContentSelectors:c,decls:3,vars:2,consts:[["class","bg-white ptb-8",4,"ngIf"],[3,"hidden"],[1,"bg-white","ptb-8"],[1,"text-center"],[1,"not-authorized-img"],["src","assets/images/authorized/admin.svg"],[1,"text-primary","weight-bold","not-authorized-text"],[1,"weight-bold"],[1,"max-200","max-center","mt-4"],[1,"s-btn","btn-primary","btn-block",3,"click"]],template:function(t,e){1&t&&(n.F$t(),n.YNc(0,d,13,6,"div",0),n.TgZ(1,"div",1),n.Hsn(2),n.qZA()),2&t&&(n.Q6J("ngIf",e.notAuthorized),n.xp6(1),n.Q6J("hidden",e.notAuthorized))},directives:[o.O5],pipes:[a.X$],styles:[".not-authorized-text[_ngcontent-%COMP%]{font-size:48px}"]}),t})()},3886:function(t,e,i){i.d(e,{t:function(){return l}});var n=i(3018),r=i(7433),o=i(8583),a=i(9790);function s(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"span",8),n.NdJ("click",function(){return n.CHM(t),n.oxw().fastBackward()}),n._UZ(1,"i",9),n.qZA()}}function d(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"span",8),n.NdJ("click",function(){const e=n.CHM(t).$implicit;return n.oxw().cellClicked(e)}),n._uU(1),n.qZA()}if(2&t){const t=e.$implicit,i=n.oxw();n.ekj("active",t==i.activeCell),n.xp6(1),n.hij(" ",t," ")}}function c(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"span",8),n.NdJ("click",function(){return n.CHM(t),n.oxw().fastForward()}),n._UZ(1,"i",10),n.qZA()}}let l=(()=>{class t{constructor(t){this.updateService=t,this.perPage=0,this.paginationUpdate=new n.vpe,this.paginationsStartCell=[],this.step=10,this.paginationNumber=0,this.cellsNumber=0,this.activeCell=1,this.canGoBackward=!1,this.canGoForward=!1,this.currentCells=[],this.remainingPages=this.step,this.isLoading=!0}ngOnChanges(t){this.activeCell=this.paginationData.currentPage,this.updateAll()}cellClicked(t){this.activeCell=t,this.updateAll(),this.emitValue()}goNext(){this.remainingPages>0&&this.cellClicked(this.activeCell+1)}goPrev(){this.activeCell>1&&this.cellClicked(this.activeCell-1)}fastForward(){this.cellClicked(this.paginationsStartCell[this.paginationNumber]+this.cellsNumber)}fastBackward(){this.cellClicked(this.paginationsStartCell[this.paginationNumber]-this.step)}emitValue(){this.paginationUpdate.emit(this.activeCell)}updateAll(){this.updateStartingCell(),this.updateRemaining(),this.drawCells(),this.checkFastButtons()}checkFastButtons(){this.canGoForward=this.remainingPages+this.activeCell-(this.paginationsStartCell[this.paginationNumber]+this.cellsNumber)>=0,this.canGoBackward=this.paginationsStartCell[this.paginationNumber]>1}drawCells(){this.currentCells=[];for(let t=0;t<this.cellsNumber;t++)this.currentCells.push(this.paginationsStartCell[this.paginationNumber]+t)}updateStartingCell(){this.paginationsStartCell=this.updateService.getPaginationStartCell(),1==this.activeCell?this.paginationsStartCell[this.paginationNumber]=1:(this.activeCell<this.paginationsStartCell[this.paginationNumber]&&(this.paginationsStartCell[this.paginationNumber]-=this.step),this.activeCell>this.paginationsStartCell[this.paginationNumber]-1+this.step&&(this.paginationsStartCell[this.paginationNumber]=this.paginationsStartCell[this.paginationNumber]+this.step)),this.updateService.updatePaginationStartCell(this.paginationsStartCell)}updateRemaining(){this.remainingPages=this.paginationData.totalPages-this.activeCell;let t=this.paginationData.totalPages+1-this.paginationsStartCell[this.paginationNumber];this.cellsNumber=t>=this.step?this.step:t}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(r.G))},t.\u0275cmp=n.Xpm({type:t,selectors:[["pagination"]],inputs:{paginationData:"paginationData",perPage:"perPage",step:"step",paginationNumber:"paginationNumber"},outputs:{paginationUpdate:"paginationUpdate"},features:[n.TTD],decls:18,vars:25,consts:[[1,"flex-space-between","flex-middle","flex-wrap","pagination-container"],[1,"s-pagination-info","mtb-1","text-left"],[1,"size-tiny"],[1,"s-pagination","mtb-1","text-right"],[1,"pagination-btn",3,"click"],[1,"pagination-cells"],["class","pagination-cell",3,"click",4,"ngIf"],["class","pagination-cell",3,"active","click",4,"ngFor","ngForOf"],[1,"pagination-cell",3,"click"],[1,"fa","fa-angle-double-left"],[1,"fa","fa-angle-double-right"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"span",2),n._uU(3),n.ALo(4,"translate"),n.ALo(5,"translate"),n.ALo(6,"translate"),n.qZA(),n.qZA(),n.TgZ(7,"div",3),n.TgZ(8,"div",4),n.NdJ("click",function(){return e.goPrev()}),n._uU(9),n.ALo(10,"translate"),n.qZA(),n.TgZ(11,"div",5),n.YNc(12,s,2,0,"span",6),n.YNc(13,d,2,3,"span",7),n.YNc(14,c,2,0,"span",6),n.qZA(),n.TgZ(15,"div",4),n.NdJ("click",function(){return e.goNext()}),n._uU(16),n.ALo(17,"translate"),n.qZA(),n.qZA(),n.qZA()),2&t&&(n.xp6(3),n.gL8(" ",n.lcZ(4,15,"tr_showing")," ",e.paginationData.totalCount>0?e.perPage*(e.paginationData.currentPage-1)+1:0," ",n.lcZ(5,17,"tr_to")," ",e.perPage*(e.paginationData.currentPage-1)+e.perPage<e.paginationData.totalCount?e.perPage*(e.paginationData.currentPage-1)+e.perPage:e.paginationData.totalCount," ",n.lcZ(6,19,"tr_of")," ",e.paginationData.totalCount||0," "),n.xp6(5),n.ekj("btn-disabled",e.activeCell<=1),n.xp6(1),n.hij(" ",n.lcZ(10,21,"tr_previous")," "),n.xp6(3),n.Q6J("ngIf",e.canGoBackward),n.xp6(1),n.Q6J("ngForOf",e.currentCells),n.xp6(1),n.Q6J("ngIf",e.canGoForward),n.xp6(1),n.ekj("btn-disabled",!(e.remainingPages>0)),n.xp6(1),n.hij(" ",n.lcZ(17,23,"tr_next")," "))},directives:[o.O5,o.sg],pipes:[a.X$],styles:[""]}),t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})()},2019:function(t,e,i){i.d(e,{Y:function(){return d}});var n=i(7677),r=i(3342),o=i(3018),a=i(1841),s=i(3462);let d=(()=>{class t{constructor(t,e){this.http=t,this.appNotificationService=e}getCategorys(t){return this.http.get(n.gk,{params:t})}getCategory(t){return this.http.get(n.gk+`/${t}`)}createCategory(t){return this.http.post(n.Mf,t)}updateCategory(t){return this.http.put(n.xp,t).pipe((0,r.b)({error:t=>{this.appNotificationService.push("Update Category Failed","error")}}))}deleteCategory(t){return this.http.delete(n.ab+"/"+t).pipe((0,r.b)({error:t=>{this.appNotificationService.push("Delete Category Failed","error")}}))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(a.eN),o.LFG(s.o))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);