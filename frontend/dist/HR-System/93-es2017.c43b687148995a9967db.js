"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[93],{93:function(t,e,i){i.r(e),i.d(e,{InventoryModule:function(){return U}});var r=i(8583),s=i(4655),n=i(3018);let o=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-create-edit-product"]],decls:2,vars:0,template:function(t,e){1&t&&(n.TgZ(0,"p"),n._uU(1,"create-edit-product works!"),n.qZA())},styles:[""]}),t})();var a=i(4736),c=i(3462),p=i(9790),d=i(1352),g=i(2238),u=i(2019),l=i(2018),h=i(3679),Z=i(3886),f=i(2557);function A(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"div",10),n.TgZ(1,"div",11),n.TgZ(2,"div",12),n.TgZ(3,"div",13),n.TgZ(4,"label"),n._uU(5),n.ALo(6,"translate"),n.ALo(7,"translate"),n.qZA(),n.TgZ(8,"div",14),n.TgZ(9,"input",15),n.NdJ("keyup",function(e){return n.CHM(t),n.oxw().filterproducts(e,"searchTerm")})("ngModelChange",function(e){return n.CHM(t),n.oxw().nameSearchTerm=e}),n.ALo(10,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&t){const t=n.oxw();n.xp6(5),n.AsE("",n.lcZ(6,4,"tr_name"),"/",n.lcZ(7,6,"tr_code"),""),n.xp6(4),n.s9C("placeholder",n.lcZ(10,8,"tr_search")),n.Q6J("ngModel",t.nameSearchTerm)}}function m(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"tr"),n.TgZ(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td"),n._uU(4),n.qZA(),n.TgZ(5,"td"),n._uU(6),n.qZA(),n.TgZ(7,"td"),n._uU(8),n.qZA(),n.TgZ(9,"td"),n._uU(10),n.qZA(),n.TgZ(11,"td"),n._uU(12),n.qZA(),n.TgZ(13,"td"),n.TgZ(14,"span",24),n._UZ(15,"i",25),n.TgZ(16,"div",26),n.TgZ(17,"div",27),n.NdJ("click",function(){const e=n.CHM(t).$implicit;return n.oxw(3).createOrEditproduct(!0,e)}),n._uU(18),n.ALo(19,"translate"),n.qZA(),n._UZ(20,"div",28),n.TgZ(21,"div",27),n.NdJ("click",function(){const e=n.CHM(t).$implicit;return n.oxw(3).deleteProduct(e._id)}),n.TgZ(22,"div",29),n._uU(23),n.ALo(24,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&t){const t=e.$implicit,i=e.index;n.xp6(2),n.hij(" ",i+1,""),n.xp6(2),n.Oqu(t.name),n.xp6(2),n.Oqu(null==t.branch?null:t.branch.name),n.xp6(2),n.Oqu(t.code),n.xp6(2),n.Oqu(t.stock),n.xp6(2),n.Oqu(t.price),n.xp6(6),n.hij(" ",n.lcZ(19,8,"tr_action.edit")," "),n.xp6(5),n.hij(" ",n.lcZ(24,10,"tr_action.delete")," ")}}function b(t,e){if(1&t&&(n.TgZ(0,"div",21),n.TgZ(1,"table",22),n.TgZ(2,"thead"),n.TgZ(3,"tr"),n._UZ(4,"th"),n.TgZ(5,"th"),n._uU(6,"Product Name"),n.qZA(),n.TgZ(7,"th"),n._uU(8,"Branch"),n.qZA(),n.TgZ(9,"th"),n._uU(10,"Code"),n.qZA(),n.TgZ(11,"th"),n._uU(12,"Stock"),n.qZA(),n.TgZ(13,"th"),n._uU(14,"price"),n.qZA(),n._UZ(15,"th"),n.qZA(),n.qZA(),n.TgZ(16,"tbody"),n.YNc(17,m,25,12,"tr",23),n.qZA(),n.qZA(),n.qZA()),2&t){const t=n.oxw(2);n.xp6(17),n.Q6J("ngForOf",t.productsList)}}function T(t,e){1&t&&(n.TgZ(0,"div",30),n._UZ(1,"i",31),n.TgZ(2,"p"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.qZA()),2&t&&(n.xp6(3),n.Oqu(n.lcZ(4,1,"tr_empty_state")))}function q(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"div",16),n.YNc(1,b,18,1,"div",17),n.YNc(2,T,5,3,"div",18),n.TgZ(3,"div",19),n.TgZ(4,"pagination",20),n.NdJ("paginationUpdate",function(e){return n.CHM(t),n.oxw().paginationUpdate(e)}),n.qZA(),n.qZA(),n.qZA()}if(2&t){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.productsList.length>0),n.xp6(1),n.Q6J("ngIf",0==t.productsList.length),n.xp6(2),n.Q6J("paginationData",t.paginationData)("perPage",t.paginationPerPage)}}function y(t,e){1&t&&(n.TgZ(0,"div"),n._UZ(1,"app-ghost-line",32),n.qZA()),2&t&&(n.xp6(1),n.Q6J("length",12)("type","table"))}const v=[{path:"",component:(()=>{class t{constructor(t,e,i,r,s,n){this.productsService=t,this.appNotificationService=e,this.translateService=i,this.globals=r,this.dialog=s,this.CategoriesServce=n,this.productsLoading=!0,this.isFilterOpen=!0,this.paginationPerPage=10,this.categorys=[],this.productsList=[],this.categorysLoading=!1,this.fullscreenEnabled=!1,this.isNotAuthorized=!1,this.iscategoryNotAuthorized=!1,this.currentOrder={name:"",category:""},this.params={page:1,perPage:this.paginationPerPage},this.categorysParams={page:1,per_page:10},this.subscriptions=[]}ngOnInit(){this.getproducts(),this.getcategorys()}getproducts(){this.productsLoading=!0,this.subscriptions.push(this.productsService.getProducts(this.params).subscribe(t=>{this.productsList=t.products,this.paginationData=t.meta,this.productsLoading=!1},t=>{403==t.status?(this.isNotAuthorized=!0,this.productsLoading=!1):this.appNotificationService.push(this.translateService.instant("tr_unexpected_error_message"),"error")}))}getcategorys(){this.categorysLoading=!0,this.subscriptions.push(this.CategoriesServce.getCategorys(this.categorysParams).subscribe(t=>{this.categorysPagination=t.meta,this.categorys=this.categorys.concat(t.categories),this.categorysLoading=!1},t=>{403==t.status&&(this.iscategoryNotAuthorized=!0,this.categorysLoading=!1)}))}nextBatch(){this.categorysPagination.nextPage&&(this.categorysLoading=!0,this.categorysParams.page=this.categorysPagination.nextPage,this.getcategorys())}filterproducts(t,e){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{t="by_category_id"==e?t:t.target.value.trim(),this.params.search=t,this.params.page=1,this.getproducts()},500)}paginationUpdate(t){this.params.page=t,this.getproducts()}createOrEditproduct(t,e){this.dialog.open(o,{width:"850px",data:{isEdit:t,product:e,productId:null==e?void 0:e._id},disableClose:!0}).afterClosed().subscribe(t=>{t&&this.getproducts()})}deleteProduct(t){this.productsService.deleteProduct(t).subscribe(()=>{this.params.page=1,this.getproducts()})}ngOnDestroy(){this.subscriptions.forEach(t=>t&&t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(a.T),n.Y36(c.o),n.Y36(p.sK),n.Y36(d.O),n.Y36(g.uw),n.Y36(u.Y))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-inventory-list"]],decls:15,vars:10,consts:[["not-authorized","",1,"content-shadow","bg-white","mb-5",3,"notAuthorized"],[1,"size-body","title-with-btn","plr-4","ptb-4"],[1,"page-title"],[1,"btn-group"],[1,"s-btn","btn-primary",3,"click"],[1,"s-btn","btn-secondary","size-body",3,"click"],["aria-hidden","false",1,"fa","fa-filter","text-primary"],["class","filters-card bg-secondary plr-4 ptb-2 mb-7",4,"ngIf"],["class","plr-4 mt-4",4,"ngIf"],[4,"ngIf"],[1,"filters-card","bg-secondary","plr-4","ptb-2","mb-7"],[1,"row"],[1,"col-md-3"],[1,"form-group","mb-0"],[1,"input-with-icon","bg-white","width-100"],[1,"s-control",3,"placeholder","ngModel","keyup","ngModelChange"],[1,"plr-4","mt-4"],["class","table-container products-list","id","table-container",4,"ngIf"],["class","empty-state-here text-center ptb-8",4,"ngIf"],[1,"plr-4","ptb-4"],[3,"paginationData","perPage","paginationUpdate"],["id","table-container",1,"table-container","products-list"],[1,"s-table","table","layout-fixed","products-list"],[4,"ngFor","ngForOf"],[1,"options-menu"],["aria-hidden","true",1,"fa","fa-ellipsis-v"],[1,"options-menu-container","p-0"],[1,"single-option",3,"click"],[1,"border-bottom"],[1,"text-error"],[1,"empty-state-here","text-center","ptb-8"],[1,"fa","fa-folder-open","empty-icon","text-primary"],[3,"length","type"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0),n.TgZ(1,"h2",1),n.TgZ(2,"span",2),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"div",3),n.TgZ(6,"button",4),n.NdJ("click",function(){return e.createOrEditproduct(!1)}),n._uU(7),n.ALo(8,"translate"),n.qZA(),n.TgZ(9,"button",5),n.NdJ("click",function(){return e.isFilterOpen=!e.isFilterOpen}),n._UZ(10,"i",6),n.qZA(),n.qZA(),n.qZA(),n.YNc(11,A,11,10,"div",7),n.TgZ(12,"div"),n.YNc(13,q,5,4,"div",8),n.YNc(14,y,2,2,"div",9),n.qZA(),n.qZA()),2&t&&(n.Q6J("notAuthorized",e.isNotAuthorized),n.xp6(3),n.Oqu(n.lcZ(4,6,"tr_inventory")),n.xp6(4),n.hij(" ",n.lcZ(8,8,"tr_add_product")," "),n.xp6(4),n.Q6J("ngIf",e.isFilterOpen),n.xp6(2),n.Q6J("ngIf",!e.productsLoading),n.xp6(1),n.Q6J("ngIf",e.productsLoading))},directives:[l.Z,r.O5,h.Fj,h.JJ,h.On,Z.t,r.sg,f.A],pipes:[p.X$],styles:[""]}),t})()}];let _=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[s.Bz.forChild(v)],s.Bz]}),t})();var x=i(4685);let U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[r.ez,_,x.m]]}),t})()}}]);