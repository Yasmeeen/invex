<div class="complex-modal">
    <div class="modal-wrapper">
      <div class="close-modal-icon" (click)="closeModal()"></div>
      <div class="modal-content" #modalContent>
        <div class="modal-header border-bottom">
          <h3 class="steel weight-medium size-default m-0">New Order</h3>
        </div>
        <div class="modal-body weight-medium steel">
          <div class="add-student-modal-container">
            <div class="content-container plr-4 ptb-3">
              <form #orderForm="ngForm">
                <div class="row">
                  <!-- Client Name -->
                  <div class="col-md-4">
                    <div
                      class="form-group"
                      [class.has-error]="clientName.invalid && orderForm.submitted"
                    >
                      <label for="">Client Name</label>
                      <input
                        type="text"
                        class="s-control"
                        name="clientName"
                        ngModel
                        #clientName="ngModel"
                        required
                      />
                      <span
                        class="text-error size-small validator"
                        *ngIf="clientName.invalid && orderForm.submitted"
                      >
                        Client name is required.
                      </span>
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div
                      class="form-group"
                      [class.has-error]="clientPhone.invalid && orderForm.submitted"
                    >
                      <label for="">Client Phone</label>
                      <input
                        type="text"
                        class="s-control"
                        name="clientPhone"
                        ngModel
                        #clientPhone="ngModel"
                        required
                      />
                      <span
                        class="text-error size-small validator"
                        *ngIf="clientPhone.invalid && orderForm.submitted"
                      >
                        phone number is required.
                      </span>
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div
                      class="form-group"
                      [class.has-error]="sellerName.invalid && orderForm.submitted"
                    >
                      <label for="">seller name</label>
                      <input
                        type="text"
                        class="s-control"
                        name="sellerName"
                        ngModel
                        #sellerName="ngModel"
                        required
                      />
                      <span
                        class="text-error size-small validator"
                        *ngIf="sellerName.invalid && orderForm.submitted"
                      >
                        phone number is required.
                      </span>
                    </div>
                  </div>
  
                  <!-- Total Price -->
                  <!-- <div class="col-md-6">
                    <div class="form-group">
                      <label for="">Total Price</label>
                      <input
                        type="number"
                        class="s-control"
                        [value]="totalPrice"
                        readonly
                      />
                    </div>
                  </div>
   -->
            
                </div>
                <div class="row mt-6">
                          <!-- Product Inputs -->
                  <div class="col-12" *ngFor="let product of orderProducts; let i = index">
                    <div class="row ">
                        <div class="col-md-2">
                       <label>delete</label>
                            <button class="s-btn btn-sm btn-danger" type="button" (click)="removeProduct(i)">
                              <i class="fa fa-trash"></i>
                            </button>
                          </div>
                        <div class="col-md-4">
                            <div
                              class="form-group"
                              [class.has-error]="
                                productCodes.invalid && orderForm.submitted
                              "
                            >
                              <label for="">Products Code</label>
                              <div class="input-with-icon bg-white">
                                <ng-select
                                  class="s-control s-select"
                                  placeholder="{{ 'tr_select' | translate }}"
                             
                                  bindLabel="code"
                                  [clearable]="false"
                                  ngModel
                                  #productCodes="ngModel"
                                  name="product"
                                  [items]="products"
                                  required
                                >
                                </ng-select>
                                <i class="fa fa-search input-icon"></i>
                              </div>
      
                              <span
                                class="text-error size-small validator"
                                *ngIf="
                                  productCodes.invalid && orderForm.submitted
                                "
                              >
                                Product code is required.
                              </span>
                            </div>
                          </div>
  
                      <div class="col-md-3">
                        <div class="form-group">
                          <label for="">Quantity</label>
                          <input
                            type="number"
                            class="s-control"
                            [(ngModel)]="product.quantity"
                            name="quantity{{ i }}"
                            (input)="calculateTotalPrice()"
                            required
                            min="1"
                          />
                        </div>
                      </div>
  
                      <div class="col-md-3">
                        <div class="form-group">
                          <label >Price</label>
                         <div class="mt-3">500$</div>
                        </div>
                      </div>
  
               
                    </div>
                  </div>
  
                  <!-- Add Product Button -->
                  <div class="col-12 mt-2 flex flex-end">
                    <button type="button" class="s-btn btn-primary" (click)="addProductRow()">
                      <i class="fa fa-plus mr-1"></i>Add Product
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
  
        <!-- Footer -->
        <div class="modal-footer mt-3 text-right">
          <button class="s-btn btn-secondary mr-3" (click)="closeModal()">Cancel</button>
          <button class="s-btn btn-primary mr-3" (click)="submitForm()">Save & Print</button>
          <button class="s-btn btn-primary" (click)="printInvoice()">Print</button>
        </div>



     
      </div>
    </div>

    <div class="invoice-container" id = "print-container">
        <div class="center">
            <div class="bold">solddoutt store</div>
          </div>
        
          <table>
            <tr>
              <td>العميل:</td>
              <td>ياسمين عبدالحي محمد</td>
            </tr>
            <tr>
              <td>الهاتف:</td>
              <td>01115673071</td>
            </tr>
            <tr>
              <td>العنوان:</td>
              <td>القاهره</td>
            </tr>
          </table>
        
          <div class="dashed"></div>
        
          <table>
            <tr>
              <td>رقم الفاتورة:</td>
              <td>4431</td>
              <td>عدد المواد:</td>
              <td>7</td>
            </tr>
            <tr>
              <td>التاريخ:</td>
              <td colspan="3">2025/07/30 19:01</td>
            </tr>
          </table>
        
          <div class="dashed"></div>
        
          <table>
            <tr class="bold">
              <td>المجموع</td>
              <td>الكمية</td>
              <td>السعر</td>
              <td>الاسم</td>
            </tr>
            <tr><td>700.00</td><td>1.00</td><td>700.00</td><td>ZARA QUARTER ZIPPER</td></tr>
            <tr><td>700.00</td><td>1.00</td><td>700.00</td><td>moncler</td></tr>
            <tr><td>700.00</td><td>1.00</td><td>700.00</td><td>ae reflect</td></tr>
            <tr><td>1300.00</td><td>2.00</td><td>650.00</td><td>kenzo</td></tr>
            <tr><td>2400.00</td><td>3.00</td><td>800.00</td><td>p&amp;b</td></tr>
            <tr><td>700.00</td><td>1.00</td><td>700.00</td><td>phlip plein</td></tr>
            <tr><td>650.00</td><td>1.00</td><td>650.00</td><td>one piece</td></tr>
          </table>
        
          <div class="dashed"></div>
        
          <table>
            <tr class="total">
              <td>إجمالي الفاتورة:</td>
              <td>7,150.00</td>
            </tr>
            <tr>
              <td>% الخصم:</td>
              <td>0</td>
            </tr>
            <tr>
              <td>مبلغ الخصم:</td>
              <td>2,350.00</td>
            </tr>
            <tr>
              <td>% الضريبة:</td>
              <td>0</td>
            </tr>
            <tr>
              <td>مبلغ الضريبة:</td>
              <td>0.00</td>
            </tr>
          </table>
        
          <div class="dashed"></div>
        
          <table>
            <tr>
              <td>المبلغ المدفوع:</td>
              <td>4,800.00</td>
            </tr>
            <tr>
              <td>المبلغ المتبقي مرتجع:</td>
              <td>0.00</td>
            </tr>
            <tr>
              <td>مبلغ ذمم الفاتورة:</td>
              <td>0.00</td>
            </tr>
          </table>
        
          <div class="double-border"></div>
          <div class="final-total">صافي قيمة الفاتورة<br />4,800.00</div>
          <div class="double-border"></div>
        
          <div class="center">
            <div class="bold">solddoutt store</div>
            <div>مدينة نصر، شارع الطاقة بجوار النادي الأهلي</div>
            <div>01150564880</div>
          </div>
    </div>
  </div>
  